                  Прошивка 1.1.1.8f-b7 для роутера Asus RT-N56U от Padavan.


Данная прошивка основана на базе:
- Официальной прошивки 1.0.1.8f.
- Ядра Linux из проекта wive-rtnl, срез 3.0.2.
 (https://gitorious.org/wive-rtnl-ralink-rt305x-routers-firmware/wive-rtnl-ralink-rt305x-routers-firmware)


Список изменений относительно сборки 1.1.1.8f-b6:
- tbc


Список изменений относительно сборки 1.1.1.8f-b5:

- Переход ядра Linux на срез wive-rtnl 2.5.1:
  1) Исправлена аллокация памяти для embedded устройств (регрессия фрагментации ОЗУ).
  2) Исправлен SLUB аллокатор.
  3) Улучшена совместимость реализации TCP протокола с требованиями RFC.
  4) Улучшена поддержка IPv6.
  5) Исправлено сканирование SCSI устройств для USB storage (проблема определения некоторых накопителей).
  6) Исправлена регрессия регистрации монолитных модулей в sysfs.
- Добавлена задержка 3с перед запуском серверов печати после подключения принтера в USB порт.
- Исправлена загрузка пользовательских статических маршрутов типа LAN.
- Исправлена работа логики WAN down для соединения static IP.
- Добавлена утилита hw_nat от Ralink для контроля состояния HW_NAT.


Список изменений относительно сборки 1.1.1.8e-b4:

- Перенесены изменения из официальной прошивки 1.0.1.8f.
- Исправлен биндинг торрента Transmission на все интерфейсы. Transmission работает на WAN 
  интерфейсах и более не находится за NAT. Не требует проброса портов.
- Исправлена ошибка сборки USB-over-Ethernet сервера печати u2ec под gcc-4xx, печать из
  Windows с использованием vuhub драйвера Asus теперь работает.
- Добавлена поддержка печати через TCP/IP RAW порт 9100 посредством сервера p910nd.
- Добавлена страница в WebGUI для управления серверами печати.
- Изменена логика загрузка серверов печати - запуск серверов выполняется только после подключения 
  принтера к USB и выгрузка после отключения принтера из USB.
- Увеличено время таймаута DHCP клиента до 16 секунд для улучшения работы с загруженными DHCP 
  серверами провайдера.
- Доработана логика выбора узла ttyUSBx для USB 3G модемов. Добавлена возможность ручного 
  выбора узла ttyUSBx в WebGUI, в случае если автовыбор работает некорректно с отдельными 
  моделями USB модемов.
- Исправлена проблема отображения в WebGUI накопителей, содержащих в имени символы ',",`.
- Исправлено определение USB HDD накопителей с USB дескриптором bNumInterfaces > 1.
- Обновлен пакет dnsmasq-2.61.
- Обновлен пакет miniupnpd-1.6.20120502.
- Добавлена отсутствующая QoS утилита tc из пакета iproute2.
- Добавлена возможность задавать интервал бездействия (spindown таймер), а также отключать 
  APM (автопарковка головок) для USB HDD. Некоторые модели USB HDD не поддерживают APM и/или 
  spindown таймер.


Список изменений относительно сборки 1.1.1.8e-b3:

- Переход ядра Linux на срез wive-rtnl 2.5.x: 
  1) HW_NAT - исправления порчи mcast/bcast пакетов при PPE WiFi offload.
  2) Netfilter - фикс icmp conntrack.
  3) Slab - фикс возможной утечки памяти.
- Исправлена регрессия локального резольвинга из /etc/hosts в uClibc-0.9.28.3.
- Исправлено отключение NAT (пропадание Интернет в LAN) при включении функций 
  "BattleNET" и "Переключатель портов".
- Исправлен kernel oops при выгрузке модуля ipt_autofw.ko ("Переключатель портов").
- Включены CONFIG_PM и CONFIG_SCSI_SCAN_ASYNC в конфигурации ядра.
- Удалена вся рудиментарная логика из rc, проинспектировано масса грязного кода в rc, 
  исправлены сотни хинтов gcc при сборке rc. ASUS Download Master более не поддерживается.
- Доработана логика запуска USB приложений при старте роутера а также при USB hotplug. 
- Добавлен торрент клиент Transmission 2.51. Для работы торрента достаточно создать на 
  требуемом разделе USB накопителя директорию "transmission". Порты UDP и TCP для входящих 
  соединений пиров пробрасываются автоматически при запуске/останове торрент клиента. 
  Добавлено включение доступа к интерфейсу управления из WAN.
- Добавлено управление tcp_syncookies (prevent SYN flood attack) из WebGUI. По умолчанию
  tcp_syncookies выключена.
- Доработана общая логика сборки проекта, поддерживается выбор всех параметров 
  в файле .config.


Список изменений относительно сборки 1.1.1.8e-b2:

- Переход ядра Linux на срез wive-rtnl 2.4.1: 
  1) VFS - исправление регрессии sendfile, решение проблем с minidlna и samba сервером.
  2) FastNat - оптимизация, фиксы. 
  3) HW_NAT - исключение mcast/bcast трафика из PPE, фикс для GRE пакетов.
  4) Netfilter - оптимизация, фиксы.
- Откат на стабильный uClibc-0.9.28.3.
- Исправлена регрессия с URL Filter и LAN to WAN Filter.
- Исправлена регрессия printk в системном логе (пропадание строк).
- Добавлена подгрузка пользовательских маппингов из /etc/storage/hosts.
- Добавлена очистка conntrack table и route table после события wan down.
- Исправлена работа Logout/Reboot со страницы Statistics.
- NAT loopback включен по умолчанию.


Список изменений относительно сборки 1.0.1.8e-p2:

- Проект переведен в новое дерево с переработанной структурой сборки пакетов.
- Переход на новый кросс-компилятор gcc-4.4.7, binutils-2.21.1, uClibc-0.9.33.
- Полная замена стокового ядра Linux на ядро Linux из проекта wive-rtnl, содержащее огромное кол-во 
  бекпортов из апстрима и множество оптимизаций, в том числе для SoC Ralink.
- Добавлен openssl-0.9.8u.
- Добавлен libiconv-1.13.1.
- Добавлен sftp-server из пакета openssh-5.9p1.
- Обновлен пакет dnsmasq-2.60. 
- Обновлен пакет iptables-1.3.8. 
- Заменен драйвер ufsd с поддержкой как NTFS, так и HFS/HFS+.
- Правила NAT MASQUERADE заменены на более быстрый SNAT.
- NAT loopback отключен по умолчанию и управляется из Web интерфейса.
- Добавлен выбор модели NAT - RCONE/FCONE/Linux. По умолчанию строгая модель RCONE.
- Наложен security патч CVE-2012-1182.patch для samba-3.0.37.
- Исправлены некоторые недочеты в Web интерфейсе.


ВНИМАНИЕ!
На данной прошивке НЕ РАБОТАЕТ:
- WPS/WSC. Полностью отключено из-за большой дыры в безопасности WiFi.
- ASUS Download Master более не поддерживается. Заменен на Transmission.





-
02.06.2012
Padavan
