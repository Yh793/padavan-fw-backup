            ASUS RT-N56U custom firmware 1.1.2.0 by Padavan


This firmware is based on:
- Original firmwares 1.0.x.x.
- Linux kernel from wive-rtnl project, trunc 3.1.0.
 (https://gitorious.org/wive-rtnl-ralink-rt305x-routers-firmware/wive-rtnl-ralink-rt305x-routers-firmware)


Changes to firmware 1.1.1.8f-b8:

- Update Linux kernel to wive-rtnl trunc 3.1.0:
  1) NET: fix skb_allocate and headroom size calculation in some cases.
  2) NATFastpath: Fix work with devices used headroom = 0(tun, tap, gre, etc...).
  3) BRIDGE: fix br_handle_frame processing for host pkts and allow forwarding some link local frames.
  4) TCP: reduce out_of_order memory use and speedup.
  5) SK_FILTER: make sure filters dont read uninitialized memory and speedup.
- Added new "Ribbon" WebGUI interface. Special thanks to eagle23.
- Added WiFi guest AP for 2.4 and 5GHz.
- Added WiFi feature AP-Client for 2.4 and 5GHz.
- Added VPN L2TP server xl2tpd (w/o IPSec, with support kernel driver pppol2tp).
- Replaced L2TP client rp-l2tp to xl2tpd (L2TP client can selected in the project configuration file).
- Fixed delay before PPTP/L2TP WAN connection established.
- Added CPU limitation control for prevent PPP session drop on very high CPU load during data transfer 
  (PPPoE w/o HW_NAT or PPTP/L2TP).
- Fixed RDP connections through VPN PPTP server with MPPE encryption.
- Changed firmware version build rule.


Changes to firmware 1.1.1.8f-b7:

- Update Linux kernel to wive-rtnl trunc 3.0.5:
  1) Fixed random oops and panic reboots on receive oversized (>1514) Ethernet frames.
  2) HW_NAT fixes for WiFi offload.
- Fixed out of range bug in WiFi driver rt2860v2_ap (5GHz), disabled unused support 16 beacons with
  ShareMem context switch (less CPU overhead).
- Fixed WebGUI page WDS 2.4GHz corruption in Firefox.
- Fixed WebGUI pages reload after change settings.
- Disabled force add gateway IP to resolv.conf for AP mode.
- Changed WiFi enable/disable control logic - use complete up/down net interfaces for enable/disable 
  radio instead of brute on/off transceiver toggle. The same logic used for WiFi scheduler and remapped 
  WPS button.
- Kernel param rp_filter (reverse-path filter) moved to custom start script and not more overwrited from rc.
- Updated dnsmasq to v2.62.
- Increased delay after reset USB host for more stable USB devices detection on router startup.



Changes to firmware 1.1.1.8f-b6:

- Update Linux kernel to wive-rtnl trunc 3.0.3:
  1) Fixed IP fragments assembly regression (2.5.0 bug).
  2) Updated codebase to Ralink SDK 4.0.1.0, updated drivers - Ethernet raeth, hw_nat.
  3) Disabled all mcast/bcast RX traffic to PPE.
  4) Backports usbnet/cdc_ether/rndis_host from upstream (fixed RNDIS Android/WM devices).
  5) Backports some IPv6 code from upstream.
  6) Fixed sysfs module registration regression.
  7) Fixed fs.file-max control regression.
  8) Fixed OOM Delay logic.
- Updated WiFi driver rt2860v2_ap (5GHz) to v2.4.3.6.
- Added spinlock protect for shared hw_nat rx/tx hooks in rt3090_ap driver for WiFi HW_NAT offload.
- Disabled WSC/WPS, ATE, IAPP functions in the kernel configuration for both WiFi AP.
- Complete removed unsecure WSC/WPS functions from userlevel environment and WebGUI.
- Added control Below/Above for select extended WiFi channel (40MHz) in auto-channel selection mode 
  for AP 2.4GHz.
- Reworked logic for control WiFi network interfaces after WiFi settings changed and WiFi transceiver 
  enabled/disabled from WebGUI (and from remapped WPS button).
- Fixed AP scan in WDS page for AP 2.4GHz. Fixed incorrect fill AP list after scan complete. Disabled 
  forced rescan on jump to both WDS pages.
- Added execute /opt/bin/on_hotplug_printer.sh script after printer hotplug. It can be used for manual 
  firmware download to some printers (LPR Ð¸ RAW mode).
- Added support ZeroConf for pure PPPoE. Needed for some ISP IPTV (e.g. Rostelecom).
- Added support 3G/4G modems (incl. Yota LTE) with RNDIS interface.
- Removed support depricated WiMAX modems.
- Removed bogus port speed setting (no effect for data streams) for UMTS/CDMA modems (RAS).
- Added configurable function for auto-reconect WAN after USB modem hotplug. Added auto-reconnect WAN 
  after USB modem safe removed via WebGUI.
- Added syslog rotation (limit size 500KB) for prevent /tmp overflow and RAM leak.
- Added userlevel utility hw_nat from Ralink.
- Added restore IGD UPnP/NAT-PMP port forwards after router reboot.
- Updated IGD miniupnpd to v1.7.
- Updated transmission-daemon to v2.52.
- Updated rtl8367 giga-switch driver, added support ASIC RTL8367R-VB (single RGMII with VLAN1/2). Updated 
  rtl8367m userlevel utility, added output mib counters for all ports, added script rtl8367mib.
- Complete reworked WAN bridge isolation and VLAN taggedd traffic filtering.
- Fixed broken static LAN IP in AP mode.
- Fixed bad http address jump for some WebGUI pages in dynamic LAN IP in AP mode.
- Fixed WebGUI disabled-state controls corruption in Chrome and FireFox.
- Disabled miniupnpd noisy debug messages to syslog.
- Closed all network connections before router reboot, after firmware update from WebGUI.


Changes to firmware 1.1.1.8f-b5:

- Update Linux kernel to wive-rtnl trunc 2.5.1:
  1) Fix memory allocation in small system issue (RAM fragmentation regression).
  2) Fix slub allocator work.
  3) TCP implementation more RFC compatable.
  4) Improve ipv6 support.
  5) Fix SCSI rescan issue after USB storage hotplug.
  6) Fix sysfs module registration regression.
- Added delay 3s before start print-servers on USB printer hotplug.
- Fixed reload user static routes for LAN.
- Fixed WAN down action for WAN static IP.
- Added Ralink hw_nat utility for debug HW_NAT states.


Changes to firmware 1.1.1.8e-b4:

- Included changes from original firmware 1.0.1.8f.
- Fixed bittorent Transmission address bindings. Now, the Transmission binded to 
  WAN interfaces directly. Does not require port forwarding.
- Fixed USB-over-Ethernet print server "u2ec" build issue under gcc-4xx. Print under
  Windows with Asus vuhub driver is now working.
- Added support print-server via TCP/IP RAW port 9100 by p910nd daemon.
- Added WebGUI control page for managing print servers.
- Improved logic to load print-server daemons - runs only after the printer connected 
  to USB and unload after printer disconnected.
- Increased timeout for the WAN DHCP client to 16 seconds for improve works with 
  overloaded ISP DHCP servers.
- Improved logic to find USB 3G modems ttyUSBx control node. Added ability to manually
  selection ttyUSBx control node from WebGUI for some stupid modems.
- Fixed WebGUI issue for USB drives with characters ',",` in device name.
- Fixed detection of USB HDD drives with USB descriptor field bNumInterfaces > 1.
- Updated package dnsmasq-2.61.
- Updated package miniupnpd-1.6.20120502.
- Added missing QoS "tc" utility from the package iproute2.
- Added ability to set HDD spindown timer and disable APM via WebGUI. Some USB HDD 
  drives do not support these functions.


Changes to firmware 1.1.1.8e-b3:

- Update Linux kernel to wive-rtnl trunc 2.5.x:
  1) HW_NAT - fix mcast/bcast packets corrupt on PPE WiFi offload.
  2) Netfilter - icmp conntrack fix.
  3) Slab - fix memory leak.
- Fixed /etc/hosts resolver regression in uClibc-0.9.28.3.
- Fixed NAT issue (lost Internet access from LAN) on enable features 
  "BattleNET" and "Port Trigger".
- Fixed kernel oops on ipt_autofw.ko module unload ("Port Trigger").
- Enabled CONFIG_PM and CONFIG_SCSI_SCAN_ASYNC in kernel configuration.
- Removed more garbage from rc. ASUS Download Master is no longer supported.
- Reworked USB applications startup logic on start router and on USB hotplug. 
- Added torrent Transmission 2.51. To start the torrent, you need to manually
  create the directory "transmission" on target USB drive. Peer ports for 
  incoming connections is forwarded automatically after start torrent. Added 
  access control to Transmission RPC from WAN.
- Added tcp_syncookies control (prevent SYN flood attack) to WebGUI. Feature
  tcp_syncookies disabled by default.
- Reworked project tree build logic, support all params from ".config" file.


Changes to firmware 1.1.1.8e-b2:

- Update Linux kernel to wive-rtnl trunc 2.4.1:
  1) VFS - fixed sendfile regression (minidlna and samba server issues).
  2) FastNat - optimization and fixes. 
  3) HW_NAT - disable mcast/bcast process in PPE, fix GRE track.
  4) Netfilter - optimization and fixes.
- Rollback to stable uClibc-0.9.28.3.
- Fixed "URL Filter" and "LAN to WAN Filter" regression.
- Fixed printk regression (drop lines from kernel).
- Fixed Logout/Reboot actions from WebGUI "Statistics" page.
- Added load user mappings from /etc/storage/hosts.
- Added flush conntrack table and route table after WAN down action.
- NAT loopback now enabled by default.


Changes to firmware 1.0.1.8e-p2:

- Project is completely moved to the new tree.
- New cross-toolchain gcc-4.4.7, binutils-2.21.1, uClibc-0.9.33.
- Replaced Linux kernel from wive-rtnl project, with many backports from upstream 
  and many optimizations (also for Ralink SoC).
- Added openssl-0.9.8u.
- Added libiconv-1.13.1.
- Added sftp-server from package openssh-5.9p1.
- Updated package dnsmasq-2.60. 
- Updated package iptables-1.3.8. 
- Replaced kernel driver ufsd with NTFS and HFS/HFS+ support.
- Replaced NAT MASQUERADE rules to fast SNAT rules.
- Disabled NAT loopback by default. Add NAT loopback control to WebGUI.
- Added NAT type select - RCONE/FCONE/Linux. RCONE by default.
- Security patch CVE-2012-1182.patch for samba-3.0.37.
- Fixed some bugs in WebGUI.


CAUTION!
These functions DO NOT WORK:
- WPS/WSC (complete disabled by big security issues).
- ASUS Download Master is no longer supported. Replaced by Transmission.




-
07/03/2012
Padavan
