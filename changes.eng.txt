            ASUS RT-N56U custom firmware 1.1.2.3-010 by Padavan


This firmware is based on:
- Official firmware versions 1.0.x.x.
- Linux kernel from wive-rtnl project, trunc 3.1.3.
 (https://gitorious.org/wive-rtnl-ralink-rt305x-routers-firmware/wive-rtnl-ralink-rt305x-routers-firmware)


ATTENTION:
If your current firmware version is 1.1.2.2-006 or lower, it is absolutely necessary to save your 
settings to a .CFG file using WebGUI BEFORE upgrading to a newer version. After the upgrade, restore your 
settings from the saved .CFG file in a usual way.


Changes to firmware ver. 1.1.2.3-009:

- Fixed bug in javascript on Web pages Wireless - Wireless MAC Filter.
- Fixed bug in NTFS driver (missing kernel library TEXTSEARCH in kernel config). Regression in 
  ver. 1.1.2.3-009.


Changes to firmware ver. 1.1.2.2-006:

- Increased available NVRAM space from 32 to 60 kb. To avoid losing of user settings it is necessary 
  to save them before the upgrade and restore them from the saved .CFG file after.
- Increased table data's input limit up to 64 items.
- Disabled NAPI (RX-polling) of wired network kernel driver (raeth) in 2xRGMII mode.
- Added UVC kernel modules (webcam support).
- Added discrimination between work-days and weekends in Wi-Fi AP and guest AP scheduler.
- Added ability to enter description of each Wi-Fi MAC address in Wireless MAC filter.
- Extended Firewall's MAC Address Filter function to a full-fledged Parental Control function. Each 
  MAC Address Filter entry may now be associated with particular time and day of the week.
- Updated tunnelbroker.net DDNS service link in "inadyn".
- Added 3 retry count limit for DDNS refresh (inadyn).
- AsusDDNS client was moved to "inadyn". Deprecated "ez-ipupdate" package was removed.
- Corrected some design shortcomings on DDNS web page when using AsusDDNS.
- Added ability to disable STP protocol in LAN bridge when the device is in "Router" mode.
- Added DNS3 field in DHCP server settings.
- Disabled forcing of router's LAN IP as DHCP's DNS if at least one DHCP's DNS address is entered manually.
- Added drop-down listing of clients with auto-substitution in MAC and IP addresses fields on the majority 
  of the web pages (NewGUI).
- Increased the limit of "Maximum simultaneously connected users" setting up to 50 (SMB/FTP).
- Added ability to hide partitions on a storage for FTP protocol. Create a file named .hidden in the root 
  directory of the partition to hide it.
- Corrected logic of table data entries removal. Now those entries will be properly removed from NVRAM.
- Fixed UNIX password (telnet/ssh access) issue for login or password that contain characters "$".
- Added an ability to control the LEDs on the front panel of the router.
- WPS button settings, Ethernet LED and Front LED settings were moved to a separate page named "Tweaks".
- Altered the default order of some pages in WebGUI.
- Added separate page "Advanced_Netfilter_Content.asp". Removed "NAT Passthrough" page.
- Added "show/hide password" buttons (NewGUI).
- Added icons for Storage/Printer/Modem (NewGUI). Thanks to the ixbt-forum user "AK47".
- Added button "Clear" to syslog floating panel.
- Ability to change LAN parameters without reboot.
- Updated Russian localized strings.
- Fixed issues in Transmission WebGUI (2.61+).
- Fixed "Wi-Fi scheduler time-zone changes won't take effect without reboot" issue.
- Updated dnsmasq to ver. 2.63.


Changes to firmware ver. 1.1.2.2-005:

- Fixed large files (>2GB) support in vsftpd 2.3.5 (regression in ver. 1.1.2.2-005).
- Fixed Web GUI issues in AP mode (NewGUI).
- Fixed Web GUI issues under Mozilla Firefox browser (OldGUI).
- Fixed host names on Wake-On-Lan Web page (NewGUI).
- Fixed user input checking logic on Virtual Server Web page.
- Fixed user input checking logic for LAN IP address and mask.
- Fixed the Web GUI issue on switching Router -> AP mode.
- Fixed download settings and syslog under Safari browser.
- Fixed broken pre-route for the local VPN Server and Transmission when DMZ host is set.
- Hid ISP VLAN settings in VLAN-based firmware build, where they are temporary not functioning.
- Allowed wide range port selection for HTTP and SSH access from WAN.
- Added anonymous share modes for internal FTP server (vsftpd).
- Added "LED OFF" mode for green/yellow LEDs on PHY ports of Ethernet switch.
- Ability to disable ARP ping alive of remote gateway for "IPoE: Automatic IP" WAN mode.


Changes to firmware ver. 1.1.2.1-004:

- Update Linux kernel to wive-rtnl trunc 3.1.3:
  1) IPv6: keep permanent addresses on admin down.
  2) MIPS: Reorder operations in stackframe.h for better scheduling.
  3) netfilter: possible unaligned packet header in ip_route_me_harder.
- Updated kernel driver pppol2tp from wl500g project, TX buffers reallocation eliminated.
- Fixed pptp kernel driver, HW_NAT is now working properly in conjunction with PPTP MPPE 
  encryption, transmit speed (TX) is increased, all TX buffers reallocation is eliminated.
- Added scheduler for Guest Wi-Fi AP.
- Added list of connected VPN clients to VPN server.
- Increased max length of login/password in VPN server's ACL (max 32 symbols).
- Fixed problems with logins and passwords containing "space" symbol in VPN server's ACL.
- Fixed bcrelay control during several simultaneous VPN clients connections.
- Added forced DDNS update every 48 hours to prevent DDNS account removal by some DDNS 
  services due to the account inactivity.
- Updated udpxy to v1.0.23.
- Updated minidlna to v1.0.25.
- Updated vsftpd to v2.3.5 with new ACL extension module.
- Updated transmission to v2.61.
- Added new Wake-On-LAN page with hosts list (NewGUI).
- Added pop-up window with usb-disk status (NewGUI).
- Fixed DMZ issue (regression in ver. 1.1.2.1).
- Fixed firewall DoS filter (loosened syn limit).
- Fixed DHCP client in AP mode. DHCP client in AP mode is now disabled by default.
- Fixed the issue with "Restore Settings" function on the Administration page (NewGUI).
- Fixed Latvia/Estonia DST. Please update the timezone from the list.
- Fixed network charts for VLAN-based firmware build (NewGUI).
- Fixed the Reboot button issue on Main_AdmStatus_Content.asp page (NewGUI).
- Fixed issues on the Advanced_WAN_Content.asp page (NewGUI).
- Fixed the output format of Route table in the Web GUI.


Changes to firmware ver. 1.1.2.1-003:

- Reverted upstream commit "pppd: Make MSCHAP-v2 cope better with packet loss" due to 
  the pppd failure in conjunction with some ISPs (regression in ver. 1.1.2.1-002).


Changes to firmware ver. 1.1.2.1-002:

- Activated complete HW_NAT offload on both directions for WAN PPPoE (~900 Mbit/s) with 
  2xRGMII connection scheme.
- Added support for Mac partition table to the kernel configuration.
- Fully rewritten iptables rules for the internal firewall. Fixed errors, eliminated security 
  hole in FORWARD chain. Fixed the NAT loopback issue, when FastNAT path is enabled.
- Fixed WiFi drivers bug with multicast packets delivery to the clients in PSM state (e.g. all 
  mobile gadgets), it was causing service delays (regression in ver. 1.1.2.0).
- Fixed xl2tpd bug (incoming ZLB after call closed).
- Moved ALG settings to a separate group. ALG PPTP (+GRE) settings were abstracted from 
  NAT passthrough filter settings and are more defined now.
- Added custom AT-commands field for 3G RAS-modems.
- Added a call of custom user script /etc/storage/started_script.sh after the router start-up 
  process completion.
- Added custom user configuration file /etc/storage/dnsmasq.conf for dnsmasq.
- Enabled TFTP server in dnsmasq build.
- Restored complete resetting of all IGD miniupnpd forwarded ports after router reboot.
- Restyled Web GUI "NewGUI" to "ribbon_fixed". Author - eagle23.
- Added VPN server's ACL control to the Web GUI.
- Added Wake-On-LAN function to the Web GUI.
- Added new syslog floating panel with notification function (NewGUI).
- Added ON/OFF status of WiFi radio and Guest AP to the main page (NewGUI).
- Improved SystemInfo charts (NewGUI).
- Fixed broken 2.4GHz Wi-Fi scheduler (NewGUI).
- Fixed multiple other issues in the new Web GUI.
- Updated transmission to v2.60.
- Added automatic creation of the /transmission directory on USB storage (if it is not existing) 
  during Transmission start-up.
- Added busybox "inetd" applet.
- Deleted a lot of deprecated strings from NVRAM to free available NVRAM space. Router reset to 
  firmware defaults is necessary for the changes to take place.


Changes to firmware ver. 1.1.2.0-001:

- Fixed L2TP bogus "Authentication failed" for ISP Beeline on new tariffs.
- Fixed broken Tx Power for WiFi 5GHz.


Changes to firmware ver. 1.1.1.8f-b8:

- Update Linux kernel to wive-rtnl trunc 3.1.0:
  1) NET: fix skb_allocate and headroom size calculation in some cases.
  2) NATFastpath: Fix work with devices used headroom = 0(tun, tap, gre, etc...).
  3) BRIDGE: fix br_handle_frame processing for host pkts and allow forwarding some link local frames.
  4) TCP: reduce out_of_order memory use and speedup.
  5) SK_FILTER: make sure filters dont read uninitialized memory and speedup.
- Added new "Ribbon" WebGUI interface. Special thanks to eagle23.
- Added WiFi guest AP for 2.4 and 5GHz.
- Added WiFi feature AP-Client for 2.4 and 5GHz.
- Added VPN L2TP server xl2tpd (w/o IPSec, with support kernel driver pppol2tp).
- Replaced L2TP client rp-l2tp to xl2tpd (L2TP client can selected in the project configuration file).
- Fixed delay before PPTP/L2TP WAN connection established.
- Added CPU limitation control for prevent PPP session drop on very high CPU load during data transfer 
  (PPPoE w/o HW_NAT or PPTP/L2TP).
- Fixed RDP connections through VPN PPTP server with MPPE encryption.
- Changed firmware version build rule.


Changes to firmware ver. 1.1.1.8f-b7:

- Update Linux kernel to wive-rtnl trunc 3.0.5:
  1) Fixed random oops and panic reboots on receive oversized (>1514) Ethernet frames.
  2) HW_NAT fixes for WiFi offload.
- Fixed out of range bug in WiFi driver rt2860v2_ap (5GHz), disabled unused support 16 beacons with
  ShareMem context switch (less CPU overhead).
- Fixed WebGUI page WDS 2.4GHz corruption in Firefox.
- Fixed WebGUI pages reload after change settings.
- Disabled force add gateway IP to resolv.conf for AP mode.
- Changed WiFi enable/disable control logic - use complete up/down net interfaces for enable/disable 
  radio instead of brute on/off transceiver toggle. The same logic used for WiFi scheduler and remapped 
  WPS button.
- Kernel param rp_filter (reverse-path filter) moved to custom start script and not more overwrited from rc.
- Updated dnsmasq to v2.62.
- Increased delay after reset USB host for more stable USB devices detection on router startup.



Changes to firmware ver. 1.1.1.8f-b6:

- Update Linux kernel to wive-rtnl trunc 3.0.3:
  1) Fixed IP fragments assembly regression (2.5.0 bug).
  2) Updated codebase to Ralink SDK 4.0.1.0, updated drivers - Ethernet raeth, hw_nat.
  3) Disabled all mcast/bcast RX traffic to PPE.
  4) Backports usbnet/cdc_ether/rndis_host from upstream (fixed RNDIS Android/WM devices).
  5) Backports some IPv6 code from upstream.
  6) Fixed sysfs module registration regression.
  7) Fixed fs.file-max control regression.
  8) Fixed OOM Delay logic.
- Updated WiFi driver rt2860v2_ap (5GHz) to v2.4.3.6.
- Added spinlock protect for shared hw_nat rx/tx hooks in rt3090_ap driver for WiFi HW_NAT offload.
- Disabled WSC/WPS, ATE, IAPP functions in the kernel configuration for both WiFi AP.
- Complete removed unsecure WSC/WPS functions from userlevel environment and WebGUI.
- Added control Below/Above for select extended WiFi channel (40MHz) in auto-channel selection mode 
  for AP 2.4GHz.
- Reworked logic for control WiFi network interfaces after WiFi settings changed and WiFi transceiver 
  enabled/disabled from WebGUI (and from remapped WPS button).
- Fixed AP scan in WDS page for AP 2.4GHz. Fixed incorrect fill AP list after scan complete. Disabled 
  forced rescan on jump to both WDS pages.
- Added execute /opt/bin/on_hotplug_printer.sh script after printer hotplug. It can be used for manual 
  firmware download to some printers (LPR и RAW mode).
- Added support ZeroConf for pure PPPoE. Needed for some ISP IPTV (e.g. Rostelecom).
- Added support 3G/4G modems (incl. Yota LTE) with RNDIS interface.
- Removed support depricated WiMAX modems.
- Removed bogus port speed setting (no effect for data streams) for UMTS/CDMA modems (RAS).
- Added configurable function for auto-reconect WAN after USB modem hotplug. Added auto-reconnect WAN 
  after USB modem safe removed via WebGUI.
- Added syslog rotation (limit size 500KB) for prevent /tmp overflow and RAM leak.
- Added userlevel utility hw_nat from Ralink.
- Added restore IGD UPnP/NAT-PMP port forwards after router reboot.
- Updated IGD miniupnpd to v1.7.
- Updated transmission-daemon to v2.52.
- Updated rtl8367 giga-switch driver, added support ASIC RTL8367R-VB (single RGMII with VLAN1/2). Updated 
  rtl8367m userlevel utility, added output mib counters for all ports, added script rtl8367mib.
- Complete reworked WAN bridge isolation and VLAN taggedd traffic filtering.
- Fixed broken static LAN IP in AP mode.
- Fixed bad http address jump for some WebGUI pages in dynamic LAN IP in AP mode.
- Fixed WebGUI disabled-state controls corruption in Chrome and FireFox.
- Disabled miniupnpd noisy debug messages to syslog.
- Closed all network connections before router reboot, after firmware update from WebGUI.


Changes to firmware ver. 1.1.1.8f-b5:

- Update Linux kernel to wive-rtnl trunc 2.5.1:
  1) Fix memory allocation in small system issue (RAM fragmentation regression).
  2) Fix slub allocator work.
  3) TCP implementation more RFC compatable.
  4) Improve ipv6 support.
  5) Fix SCSI rescan issue after USB storage hotplug.
  6) Fix sysfs module registration regression.
- Added delay 3s before start print-servers on USB printer hotplug.
- Fixed reload user static routes for LAN.
- Fixed WAN down action for WAN static IP.
- Added Ralink hw_nat utility for debug HW_NAT states.


Changes to firmware ver. 1.1.1.8e-b4:

- Included changes from original firmware 1.0.1.8f.
- Fixed bittorent Transmission address bindings. Now, the Transmission binded to 
  WAN interfaces directly. Does not require port forwarding.
- Fixed USB-over-Ethernet print server "u2ec" build issue under gcc-4xx. Print under
  Windows with Asus vuhub driver is now working.
- Added support print-server via TCP/IP RAW port 9100 by p910nd daemon.
- Added WebGUI control page for managing print servers.
- Improved logic to load print-server daemons - runs only after the printer connected 
  to USB and unload after printer disconnected.
- Increased timeout for the WAN DHCP client to 16 seconds for improve works with 
  overloaded ISP DHCP servers.
- Improved logic to find USB 3G modems ttyUSBx control node. Added ability to manually
  selection ttyUSBx control node from WebGUI for some stupid modems.
- Fixed WebGUI issue for USB drives with characters ',",` in device name.
- Fixed detection of USB HDD drives with USB descriptor field bNumInterfaces > 1.
- Updated package dnsmasq-2.61.
- Updated package miniupnpd-1.6.20120502.
- Added missing QoS "tc" utility from the package iproute2.
- Added ability to set HDD spindown timer and disable APM via WebGUI. Some USB HDD 
  drives do not support these functions.


Changes to firmware ver. 1.1.1.8e-b3:

- Update Linux kernel to wive-rtnl trunc 2.5.x:
  1) HW_NAT - fix mcast/bcast packets corrupt on PPE WiFi offload.
  2) Netfilter - icmp conntrack fix.
  3) Slab - fix memory leak.
- Fixed /etc/hosts resolver regression in uClibc-0.9.28.3.
- Fixed NAT issue (lost Internet access from LAN) on enable features 
  "BattleNET" and "Port Trigger".
- Fixed kernel oops on ipt_autofw.ko module unload ("Port Trigger").
- Enabled CONFIG_PM and CONFIG_SCSI_SCAN_ASYNC in kernel configuration.
- Removed more garbage from rc. ASUS Download Master is no longer supported.
- Reworked USB applications startup logic on start router and on USB hotplug. 
- Added torrent Transmission 2.51. To start the torrent, you need to manually
  create the directory "transmission" on target USB drive. Peer ports for 
  incoming connections is forwarded automatically after start torrent. Added 
  access control to Transmission RPC from WAN.
- Added tcp_syncookies control (prevent SYN flood attack) to WebGUI. Feature
  tcp_syncookies disabled by default.
- Reworked project tree build logic, support all params from ".config" file.


Changes to firmware ver. 1.1.1.8e-b2:

- Update Linux kernel to wive-rtnl trunc 2.4.1:
  1) VFS - fixed sendfile regression (minidlna and samba server issues).
  2) FastNat - optimization and fixes.
  3) HW_NAT - disable mcast/bcast process in PPE, fix GRE track.
  4) Netfilter - optimization and fixes.
- Rollback to stable uClibc-0.9.28.3.
- Fixed "URL Filter" and "LAN to WAN Filter" regression.
- Fixed printk regression (drop lines from kernel).
- Fixed Logout/Reboot actions from WebGUI "Statistics" page.
- Added load user mappings from /etc/storage/hosts.
- Added flush conntrack table and route table after WAN down action.
- NAT loopback now enabled by default.


Changes to firmware ver. 1.0.1.8e-p2:

- Project is completely moved to the new tree.
- New cross-toolchain gcc-4.4.7, binutils-2.21.1, uClibc-0.9.33.
- Replaced Linux kernel from wive-rtnl project, with many backports from upstream 
  and many optimizations (also for Ralink SoC).
- Added openssl-0.9.8u.
- Added libiconv-1.13.1.
- Added sftp-server from package openssh-5.9p1.
- Updated package dnsmasq-2.60.
- Updated package iptables-1.3.8.
- Replaced kernel driver ufsd with NTFS and HFS/HFS+ support.
- Replaced NAT MASQUERADE rules to fast SNAT rules.
- Disabled NAT loopback by default. Add NAT loopback control to WebGUI.
- Added NAT type select - RCONE/FCONE/Linux. RCONE by default.
- Security patch CVE-2012-1182.patch for samba-3.0.37.
- Fixed some bugs in WebGUI.


WARNING!
These features are NO LONGER AVAILABLE:
- WPS/WSC (completely disabled due to the serious security hole).
- ASUS Download Master is no longer supported. It was replaced by Transmission.



-
08/27/2012
Padavan
